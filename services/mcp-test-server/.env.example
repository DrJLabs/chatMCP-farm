# --- Keycloak / OAuth ---
# Keep confidential values (client credentials) inside .keycloak-env and source them when running scripts.
KEYCLOAK_REALM=OMA
MCP_TEST_SERVICE_NAME=mcp-test-server
MCP_TEST_SERVICE_NAME_HUMAN="MCP Test Server"
MCP_TEST_SERVICE_NAME_MODEL=mcp-test-server
MCP_TEST_SERVICE_DESCRIPTION="Deterministic MCP test harness for OAuth + compose validation"
# Update the issuer and public URLs to match your deployment
OIDC_ISSUER=https://oauth.example.com/auth/realms/OMA
OIDC_AUDIENCE=https://mcp-service.example.com/mcp

# --- Networking & Compose (override as needed) ---
# Set COMPOSE_PROFILES=mcp-test-server in CI or automation to keep the service opt-in.
PORT=8770
MCP_BIND_HOST=0.0.0.0
MCP_PUBLIC_HOST=mcp-service.example.com
MCP_PUBLIC_BASE_URL=https://mcp-service.example.com/mcp
MCP_ALLOWED_ORIGINS=https://chat.openai.com,https://chatgpt.com
REQUIRE_AUTH=true
ENABLE_STREAMABLE=true
ENABLE_SSE=false
DEBUG_HEADERS=false
MCP_CPU_LIMIT=0.50
MCP_MEMORY_LIMIT=256M
MCP_MEMORY_RESERVATION=128M
MCP_NETWORK_EXTERNAL=traefik
MCP_BUILD_CONTEXT=.
MCP_DOCKERFILE=services/mcp-test-server/Dockerfile

# Derived manifest overrides (optional)
MCP_SERVER_NAME=mcp-test-server
MCP_SERVER_VERSION=0.1.0
MCP_NAME_HUMAN=${MCP_TEST_SERVICE_NAME_HUMAN}
MCP_NAME_MODEL=${MCP_TEST_SERVICE_NAME_MODEL}
MCP_DESCRIPTION_HUMAN=${MCP_TEST_SERVICE_DESCRIPTION}
MCP_DESCRIPTION_MODEL=${MCP_TEST_SERVICE_DESCRIPTION}

# Stream security defaults (maps to ALLOWED_ORIGINS)
PRM_RESOURCE_URL=${MCP_PUBLIC_BASE_URL}
# Compose does not expand ${VAR} within env_file values, so repeat the literal list here if needed.
ALLOWED_ORIGINS=https://chat.openai.com,https://chatgpt.com

# Reference the shared Keycloak environment helper if present
# source ../.keycloak-env
