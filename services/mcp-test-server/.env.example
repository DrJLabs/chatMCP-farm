# --- Keycloak / OAuth ---
# Keep confidential values (client credentials) inside .keycloak-env and source them when running scripts.
KEYCLOAK_REALM=local
MCP_TEST_SERVICE_NAME=mcp-test-server
MCP_TEST_SERVICE_NAME_HUMAN="MCP Test Server"
MCP_TEST_SERVICE_NAME_MODEL=mcp-test-server
MCP_TEST_SERVICE_DESCRIPTION="Deterministic MCP test harness for OAuth + compose validation"
# Update KEYCLOAK_REALM and OIDC_ISSUER to match your deployment
OIDC_ISSUER=http://127.0.0.1:5050/auth/realms/local
OIDC_AUDIENCE=http://127.0.0.1:8770/mcp
PRM_RESOURCE_URL=http://127.0.0.1:8770/mcp

# --- Networking & Compose (override as needed) ---
# Set COMPOSE_PROFILES=mcp-test-server in CI or automation to keep the service opt-in.
MCP_TEST_SERVER_PORT=8770
MCP_TEST_SERVER_BIND_HOST=0.0.0.0
MCP_TEST_SERVER_PUBLIC_HOST=mcp-test.local
MCP_PUBLIC_BASE_URL=http://127.0.0.1:8770/mcp
MCP_TEST_SERVER_PUBLIC_BASE_URL=${MCP_PUBLIC_BASE_URL}
MCP_TEST_SERVER_PRM_URL=${MCP_PUBLIC_BASE_URL}
MCP_TEST_SERVER_ALLOWED_ORIGINS=http://127.0.0.1:3333,http://localhost:3333
MCP_TEST_SERVER_REQUIRE_AUTH=true
MCP_TEST_SERVER_ENABLE_STREAMABLE=true
MCP_TEST_SERVER_ENABLE_SSE=false
MCP_TEST_SERVER_CPU_LIMIT=0.50
MCP_TEST_SERVER_MEMORY_LIMIT=256M
MCP_TEST_SERVER_MEMORY_RESERVATION=128M
MCP_TEST_SERVER_DEBUG_HEADERS=false
MCP_NETWORK_EXTERNAL=traefik
MCP_TEST_SERVER_BUILD_CONTEXT=./services/mcp-test-server

# Derived manifest overrides (optional)
MCP_SERVER_NAME=mcp-test-server
MCP_SERVER_VERSION=0.1.0
MCP_NAME_HUMAN=${MCP_TEST_SERVICE_NAME_HUMAN}
MCP_NAME_MODEL=${MCP_TEST_SERVICE_NAME_MODEL}
MCP_DESCRIPTION_HUMAN=${MCP_TEST_SERVICE_DESCRIPTION}
MCP_DESCRIPTION_MODEL=${MCP_TEST_SERVICE_DESCRIPTION}

# Stream security defaults (maps to ALLOWED_ORIGINS)
MCP_ALLOWED_ORIGINS=${MCP_TEST_SERVER_ALLOWED_ORIGINS}
ALLOWED_ORIGINS=${MCP_TEST_SERVER_ALLOWED_ORIGINS}

# Reference the shared Keycloak environment helper if present
# source ../.keycloak-env
