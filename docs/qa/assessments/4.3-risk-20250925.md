# Risk Profile: Story 4.3

Date: 2025-09-25
Reviewer: Quinn (Test Architect)

## Executive Summary
- Total Risks Identified: 3
- Critical Risks: 0
- High Risks: 1
- Aggregate Risk Score: 13/100 (sum of probability Ã— impact Ã— priority weighting)

## Critical Risks Requiring Immediate Attention
- None. Highest severity item (SEC-4.3-001) is High and must be addressed before the runbook is approved.

## Risk Matrix

| Risk ID      | Description                                                                                           | Probability | Impact | Score | Priority |
|--------------|-------------------------------------------------------------------------------------------------------|-------------|--------|-------|----------|
| SEC-4.3-001  | Runbook omits or downplays approval workflow before enabling `ALLOW_WRITE`/`ENABLE_ROOTS`.            | Medium (2)  | High (3) | 6     | High     |
| OPS-4.3-001  | Validation guidance fails to capture compose dry-run + smoke evidence, causing audit gaps.            | Medium (2)  | Medium (2) | 4 | Medium   |
| TECH-4.3-001 | Cross-reference updates missed, leaving bootstrap/compose docs pointing to stale instructions.       | Low (1)     | Medium (2) | 3 | Medium   |

## Risk Distribution
- Security: 1 (0 critical, 1 high)
- Operational: 1 (0 critical, 0 high)
- Technical/Documentation: 1 (0 critical, 0 high)
- Performance/Data/Business: 0

## Detailed Risk Register
### SEC-4.3-001 â€“ Unapproved filesystem write enablement
- **Category:** Security
- **Probability:** Medium â€“ Authors may focus on bring-up steps and forget to restate approval gating for write toggles.
- **Impact:** High â€“ Operators could enable write access without sign-off, exposing `/projects` or `/VAULTS` to modification.
- **Affected Components:** Runbook Â§5, `.env` toggles, operational approval workflow
- **Detection:** Documentation review, QA gate verification of runbook content, smoke logs showing toggles enabled
- **Mitigation Strategy:** Preventive/Detective
  - Mandate runbook section describing approval steps, approvals to record, and evidence capture before enabling writes.
  - Require QA checklist item to confirm runbook references Story 4.2 risk ID SEC-4.2-001 and Dev Notes.
  - Encourage runtime monitoring of container arguments to detect toggles in production.
- **Testing Requirements:**
  - Review test case ensuring runbook contains explicit approval workflow language.
  - Manual verification that enabling toggles triggers documentation references and evidence logging.
- **Residual Risk:** Medium â€“ Even with documentation, operations discipline required; monitor via change control.

### OPS-4.3-001 â€“ Missing validation evidence instructions
- **Category:** Operational
- **Probability:** Medium â€“ Writers may assume Story 4.2 already covered evidence, omitting reminders.
- **Impact:** Medium â€“ Without documented expectation, operators skip capturing compose `config`, logs, or smoke outputs, hurting auditability.
- **Affected Components:** Runbook validation checklist, QA evidence pipeline
- **Detection:** Story QA test design review, audit of Dev Notes attachments
- **Mitigation Strategy:** Preventive
  - Embed explicit bullet list of artifacts (compose `config`, logs, smoke script results) with guidance to store in Dev Notes/QA gates.
  - Add acceptance criterion mapping for evidence capture during validation.
- **Testing Requirements:**
  - Test case verifying runbook enumerates required evidence and references relevant scripts.
  - Audit step ensuring QA gate links collected artifacts.
- **Residual Risk:** Low/Medium â€“ Dependent on operational adherence; mitigated by PO/QA review.

### TECH-4.3-001 â€“ Stale cross-document references
- **Category:** Technical/Documentation
- **Probability:** Low â€“ Cross-reference updates are simple but easy to overlook.
- **Impact:** Medium â€“ Operators following bootstrap or compose runbooks may miss the filesystem guide, leading to inconsistent procedures.
- **Affected Components:** `docs/bootstrap-checklist.md`, `docs/runbooks/compose-and-docs.md`, other future runbooks
- **Detection:** Documentation diff review, automated link checker (if added), QA test design cross-check
- **Mitigation Strategy:** Preventive
  - Include story task ensuring all relevant runbooks point to the new document.
  - Recommend future docs add section referencing filesystem runbook by convention.
- **Testing Requirements:**
  - Unit-style documentation check confirming references exist post-update.
  - Manual review verifying hyperlinks/paths are accurate.
- **Residual Risk:** Low â€“ Once links added, updates infrequent; revalidate when new runbooks introduced.

## Risk-Based Testing Strategy
- **Priority 0:** Validate security guidance (SEC-4.3-001) and evidence capture instructions (OPS-4.3-001).
- **Priority 1:** Confirm cross-reference updates (TECH-4.3-001) through documentation review and static checks.

## Risk Acceptance Criteria
- SEC-4.3-001 must be mitigated before story approval; no QA sign-off unless approval workflow clearly documented.
- OPS-4.3-001 acceptable once evidence capture steps present and linked to QA process.
- TECH-4.3-001 accepted with documentation cross-links plus follow-up to add automated link checking when tooling exists.

## Monitoring Requirements
- Track change requests enabling write mode; ensure approvals filed per runbook.
- Periodically audit Dev Notes and QA gates for validation evidence attachments.
- Re-run documentation link sweeps whenever compose/bootstrap runbooks change.

## Risk Review Triggers
- Write toggles activated in staging/production.
- Runbook updated for new filesystem locations or additional roots.
- Compose/Bootstrap runbooks refactored or renamed.

## Recommendations
1. Embed explicit approval checklist and risk ID references in the runbook (SEC-4.3-001).
2. Add evidence capture table or bullet list enumerating required artifacts (OPS-4.3-001).
3. Update bootstrap and compose runbooks with filesystem runbook links and schedule periodic documentation link review (TECH-4.3-001).

```text
Risk profile stored at docs/qa/assessments/4.3-risk-20250925.md
```

## ðŸ”¬ Research & Validation Log
- 2025-09-25: Reviewed Docker Compose profile guidance to confirm opt-in services must be gated behind explicit `--profile` or `COMPOSE_PROFILES` usage, reinforcing SEC-4.3-001 controls. [Research: Docker Docs â€“ "Using profiles with Compose" (accessed 2025-09-25)]
- 2025-09-25: Validated Docker bind-mount recommendations for read-only mounts to support approval workflow language around `ALLOW_WRITE` toggles. [Research: Docker Docs â€“ "Bind mounts" (accessed 2025-09-25)]
