# --- Keycloak / OAuth ---
# Keep confidential values (client credentials) inside .keycloak-env and source them when running scripts.
KEYCLOAK_REALM=OMA
__SERVICE_ENV_PREFIX___SERVICE_NAME=__SERVICE_NAME__
__SERVICE_ENV_PREFIX___SERVICE_NAME_HUMAN="__SERVICE_NAME__ service"
__SERVICE_ENV_PREFIX___SERVICE_NAME_MODEL=__SERVICE_NAME__
__SERVICE_ENV_PREFIX___SERVICE_DESCRIPTION="Describe your __SERVICE_NAME__ service"
# Update the issuer and public URLs to match your deployment
OIDC_ISSUER=https://oauth.example.com/auth/realms/OMA
OIDC_AUDIENCE=https://mcp-service.example.com/mcp

# --- Baseline Verification ---
# After scaffolding run the Express 5 baseline workflow:
#   npm install --workspace services/__SERVICE_NAME__
#   npm run lint --workspace services/__SERVICE_NAME__
#   npm run test -- --coverage --workspace services/__SERVICE_NAME__
#   npm run build --workspace services/__SERVICE_NAME__
#   npm run smoke --workspace services/__SERVICE_NAME__
#   npm run postbump:test
#   npm ls express --workspace services/__SERVICE_NAME__

# --- Networking & Compose (override as needed) ---
# Set COMPOSE_PROFILES=__SERVICE_NAME__ in CI or automation to keep the service opt-in.
PORT=8770
MCP_BIND_HOST=0.0.0.0
MCP_PUBLIC_HOST=mcp-service.example.com
MCP_PUBLIC_BASE_URL=https://mcp-service.example.com/mcp
MCP_ALLOWED_ORIGINS=https://chat.openai.com,https://chatgpt.com
REQUIRE_AUTH=true
ENABLE_STREAMABLE=true
ENABLE_SSE=false
DEBUG_HEADERS=false
MCP_CPU_LIMIT=0.50
MCP_MEMORY_LIMIT=256M
MCP_MEMORY_RESERVATION=128M
MCP_NETWORK_EXTERNAL=traefik
MCP_BUILD_CONTEXT=..
MCP_DOCKERFILE=services/__SERVICE_NAME__/Dockerfile

# Derived manifest overrides (optional)
MCP_SERVER_NAME=__SERVICE_NAME__
MCP_SERVER_VERSION=0.1.0
MCP_NAME_HUMAN=${__SERVICE_ENV_PREFIX___SERVICE_NAME_HUMAN}
MCP_NAME_MODEL=${__SERVICE_ENV_PREFIX___SERVICE_NAME_MODEL}
MCP_DESCRIPTION_HUMAN=${__SERVICE_ENV_PREFIX___SERVICE_DESCRIPTION}
MCP_DESCRIPTION_MODEL=${__SERVICE_ENV_PREFIX___SERVICE_DESCRIPTION}

# Stream security defaults are driven by MCP_ALLOWED_ORIGINS

# Reference the shared Keycloak environment helper if present
# source ../../.keycloak-env
